(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1:function(e,t,a){e.exports={BodyLink:"Articles_BodyLink__3UVpD",DeleteButton:"Articles_DeleteButton__162VQ",List:"Articles_List__1Oesd",ListItem:"Articles_ListItem__7p9ke",MainDivContainer:"Articles_MainDivContainer__3P0dV",Text:"Articles_Text__2WwuO",TitleText:"Articles_TitleText__3PYnk"}},11:function(e,t,a){e.exports={Button:"Nav_Button__3Ws50",Nav:"Nav_Nav__2KBhF",Logo:"Nav_Logo__2LLN4",Ptag:"Nav_Ptag__2DkAt"}},13:function(e,t,a){e.exports={Title:"ArticleAdder_Title__1kTK0",Dropdown:"ArticleAdder_Dropdown__3Xp7w",ArticleText:"ArticleAdder_ArticleText__23sTt",ArticleAdderButton:"ArticleAdder_ArticleAdderButton__1EviC"}},14:function(e,t,a){e.exports={Pages:"PageChanger_Pages__21Ed6",NextPageButton:"PageChanger_NextPageButton__9nkwG",PageNum:"PageChanger_PageNum__3Nweu",PrevPageButton:"PageChanger_PrevPageButton__sCtlV"}},15:function(e,t,a){e.exports={CommentButton:"CommentAdder_CommentButton__2cKj-",Form:"CommentAdder_Form__3vOdH",Input:"CommentAdder_Input__20gue",Label:"CommentAdder_Label__dw0um"}},16:function(e,t,a){e.exports={Button:"Comments_Button__3FQLx",CommentListItem:"Comments_CommentListItem__VMpnl",Ptag:"Comments_Ptag__2ck7Z"}},31:function(e,t,a){e.exports={Nav:"App_Nav__1dIWL",App:"App_App__16ZpL",spinner:"App_spinner__zg8k4",spin:"App_spin__3HENx","App-logo":"App_App-logo__25k4o","App-logo-spin":"App_App-logo-spin__1e7sv","App-header":"App_App-header__xLkWl","App-link":"App_App-link__3FsH9"}},32:function(e,t,a){e.exports=a.p+"static/media/logo2.b0ec2f31.png"},33:function(e,t,a){e.exports={Select:"Sorter_Select__2suEJ"}},34:function(e,t,a){e.exports={Dropdown:"Orderer_Dropdown__2uzDg"}},35:function(e,t,a){e.exports={Votes:"Voter_Votes__1gv1B"}},37:function(e,t,a){e.exports=a(67)},42:function(e,t,a){},67:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(29),c=a.n(o),l=(a(42),a(3)),i=a(4),s=a(6),u=a(5),m=a(7),d=a(2),p=a(31),h=a.n(p),g=a(32),_=a.n(g),f=a(11),v=a.n(f),E=function(){return r.a.createElement("nav",{className:v.a.Nav},r.a.createElement(d.a,{to:"/"},r.a.createElement("img",{className:v.a.Logo,src:_.a,alt:"NC News Logo"})),r.a.createElement(d.a,{to:"/topic/cooking"},r.a.createElement("button",{className:v.a.Button},"Cooking")),r.a.createElement(d.a,{to:"/topic/football"},r.a.createElement("button",{className:v.a.Button},"Football")),r.a.createElement(d.a,{to:"/topic/coding"},r.a.createElement("button",{className:v.a.Button},"Coding")),r.a.createElement("p",{className:v.a.Ptag},"Logged in as: jessjelly"))},b=function(e){var t=e.text,a=e.err;return r.a.createElement("div",null,r.a.createElement("h1",null,t||"Something went wrong..."),!!a&&r.a.createElement("p",null,a.message))},A=a(17),C=a(10),N=a.n(C),y="https://nc-newsorama.herokuapp.com/api",k=function(e,t,a,n,r){return N.a.get("".concat(y,"/articles"),{params:{author:e,topic:t,sort_by:a,order:n,p:r}}).then(function(e){var t=e.data;return console.log(t),t})},O=function(e){return N.a.get("".concat(y,"/articles/").concat(e)).then(function(e){return e.data})},P=function(e){return N.a.get("".concat(y,"/articles/").concat(e,"/comments")).then(function(e){return e.data})},L=function(e,t){return N.a.post("".concat(y,"/articles/").concat(e,"/comments"),t).then(function(e){return e.data.comment}).catch(function(e){return console.log(e)})},j=function(e){return N.a.delete("".concat(y,"/comments/").concat(e))},x=function(e,t,a){return N.a.patch("".concat(y,"/").concat(e,"s/").concat(t),{inc_votes:a})},S=function(e){return N.a.post("".concat(y,"/articles"),e).then(function(e){return e.data.article}).catch(function(e){return console.log(e)})},B=function(e){return N.a.delete("".concat(y,"/articles/").concat(e))},w=a(1),I=a.n(w),D=function(e){var t=e.text;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"spinner"}),r.a.createElement("p",null,t||"Loading..."))},T=a(33),U=a.n(T),F=function(e){var t=e.setSort;return r.a.createElement("select",{className:U.a.Select,onChange:t},r.a.createElement("option",{value:"created_at"},"Date"),r.a.createElement("option",{value:"comment_count"},"Comments"),r.a.createElement("option",{value:"votes"},"Votes"))},M=a(34),V=a.n(M),H=function(e){var t=e.setOrder;return r.a.createElement("select",{className:V.a.Dropdown,name:"order",onChange:t},r.a.createElement("option",{value:"asc"},"Ascending"),r.a.createElement("option",{value:"desc"},"Descending"))},W=a(13),q=a.n(W),J=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={title:"",topic:"coding",author:"",body:"",err:null},a.handleTitleChange=function(e){a.setState({title:e.target.value})},a.handleTopicChange=function(e){a.setState({topic:e.target.value})},a.handleBodyChange=function(e){a.setState({body:e.target.value})},a.handleAddArticle=function(e){e.preventDefault(),S({title:a.state.title,topic:a.state.topic,body:a.state.body,author:a.props.author}).then(function(e){console.log(e),a.props.setNewArticle(e),a.setState({title:"",topic:"coding",author:"",body:""})}).catch(function(e){var t=e.err;a.setState({err:t})})},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{onSubmit:this.handleAddArticle},r.a.createElement("input",{className:q.a.Title,type:"text",placeholder:"Title",onChange:this.handleTitleChange,value:this.state.title,required:!0}),r.a.createElement("input",{className:q.a.ArticleText,placeholder:"Enter your article here...",onChange:this.handleBodyChange,value:this.state.body,required:!0}),r.a.createElement("select",{className:q.a.Dropdown,onChange:this.handleTopicChange,value:this.state.topic},r.a.createElement("option",{value:"coding"},"Coding"),r.a.createElement("option",{value:"football"},"Football"),r.a.createElement("option",{value:"cooking"},"Cooking")),r.a.createElement("button",{className:q.a.ArticleAdderButton},"Add Article")))}}]),t}(n.Component),K=function(e){return e.slice(0,250)},Y=function(e){return new Date(e).toLocaleString()},Z=function(e){var t=e.article,a=e.loggedInUser,n=e.deleteArticle;return r.a.createElement("div",null,r.a.createElement("li",{className:I.a.ListItem},r.a.createElement(d.a,{className:I.a.Link,to:"/articles/".concat(t.article_id)},r.a.createElement("h3",{className:I.a.TitleText},t.title)),r.a.createElement(d.a,{className:I.a.BodyLink,to:"/articles/".concat(t.article_id)},r.a.createElement("p",{className:I.a.Text},K(t.body),"...click here to read more")),r.a.createElement("p",{className:I.a.Text},"Author: ",t.author),r.a.createElement(d.a,{className:I.a.Link,to:"/authors/".concat(t.author)},r.a.createElement("p",{className:I.a.Text},"Read more articles by ",t.author)),r.a.createElement(d.a,{className:I.a.Link,to:"/topic/".concat(t.topic)},r.a.createElement("p",{className:I.a.Text},"Click here for more articles on... ",t.topic)),r.a.createElement("p",{className:I.a.Text},"Created at: ",Y(t.created_at)),r.a.createElement("p",{className:I.a.Text},"Votes: ",t.votes),r.a.createElement("p",{className:I.a.Text},"Comments: ",t.comment_count),a===t.author&&r.a.createElement("button",{className:I.a.DeleteButton,type:"button",onClick:function(){return n(t.article_id)}},"Delete My Article")))},z=a(14),Q=a.n(z),R=function(e){var t=e.p,a=e.finalPage,n=e.setPage;return r.a.createElement("div",{className:Q.a.Pages},r.a.createElement("button",{className:Q.a.PrevPageButton,onClick:function(){return n(t+-1)},disabled:1===t},"Previous Page"),r.a.createElement("p",{className:Q.a.PageNum},"Page: ",t),r.a.createElement("button",{className:Q.a.NextPageButton,onClick:function(){return n(t+1)},disabled:a},"Next Page"))},G=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={articles:null,sort:"created_at",order:"asc",isLoading:!0,err:null,p:1,totalArticleCount:0},a.fetchArticles=function(){var e=a.props,t=e.author,n=e.topic,r=a.state,o=r.sort,c=r.order,l=r.p;k(t,n,o,c,l).then(function(e){var t=e.articles,n=e.total_count;a.setState({articles:t,totalArticleCount:n,isLoading:!1,err:null,p:l})}).catch(function(e){a.setState({err:e,isLoading:!1})})},a.setSort=function(e){var t=e.target.value;a.setState({sort:t})},a.setOrder=function(e){var t=e.target.value;a.setState({order:t})},a.setPage=function(e){a.setState({p:e})},a.setNewArticle=function(e){a.setState({articles:[e].concat(Object(A.a)(a.state.articles))})},a.deleteArticle=function(e){B(e).then(function(){a.setState(function(t){return{articles:t.articles.filter(function(t){return t.article_id!==e})}})}).catch(function(e){a.setState({err:e})})},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.articles,n=t.isLoading,o=t.err,c=t.p,l=10*c>=t.totalArticleCount;return o?r.a.createElement(b,{err:o}):n?r.a.createElement(D,{text:"Articles are loading..."}):r.a.createElement("div",{className:I.a.MainDivContainer},r.a.createElement(F,{setSort:this.setSort}),r.a.createElement(H,{setOrder:this.setOrder}),r.a.createElement(J,{author:this.props.loggedInUser,setNewArticle:this.setNewArticle}),r.a.createElement("ul",{className:I.a.List},a&&a.map(function(t){return r.a.createElement(Z,{article:t,key:t.article_id,loggedInUser:e.props.loggedInUser,deleteArticle:e.deleteArticle})})),r.a.createElement(R,{p:c,finalPage:l,setPage:this.setPage}))}},{key:"componentDidMount",value:function(){this.fetchArticles()}},{key:"componentDidUpdate",value:function(e,t){e.topic===this.props.topic&&e.author===this.props.author&&t.sort===this.state.sort&&t.order===this.state.order&&t.p===this.state.p||this.fetchArticles(),t.totalArticleCount!==this.state.totalArticleCount&&this.setState({p:1})}}]),t}(n.Component),X=a(35),$=a.n(X),ee=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={voteModifier:0,err:null},a.vote=function(e){x(a.props.type,a.props.id,e).catch(function(e){a.setState({err:e})}),a.setState(function(t){return{voteModifier:t.voteModifier+e}})},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.voteModifier;return t.err?r.a.createElement("p",null,"Something went wrong..."):r.a.createElement("div",{className:$.a.Votes},r.a.createElement("p",null,r.a.createElement("button",{onClick:function(){return e.vote(1)},disabled:1===a},r.a.createElement("span",{role:"img","aria-label":"thumbs up"},"\ud83d\udc4d")),"Votes: ",this.props.votes+this.state.voteModifier,r.a.createElement("button",{onClick:function(){return e.vote(-1)},disabled:-1===a},r.a.createElement("span",{role:"img","aria-label":"thumbs down"},"\ud83d\udc4e"))))}}]),t}(n.Component),te=a(9),ae=a.n(te),ne=a(36),re=a(15),oe=a.n(re),ce=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={body:""},a.handleChange=function(e,t){a.setState(Object(ne.a)({},t,e))},a.handleSubmit=function(e){e.preventDefault();var t=a.state.body,n=a.props,r=n.loggedInUser,o=n.article_id;L(o,{body:t,username:r}).then(function(e){a.props.addComment(e),a.setState({body:""})})},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.state.body;return r.a.createElement("form",{className:oe.a.Form,onSubmit:this.handleSubmit},r.a.createElement("label",{className:oe.a.Label,htmlFor:"body"},"Add Your Comment Here...."),r.a.createElement("input",{className:oe.a.Input,type:"text",name:"body",id:"body",minLength:"1",required:!0,value:t,onChange:function(t){return e.handleChange(t.target.value,"body")}}),r.a.createElement("button",{className:oe.a.CommentButton},"+"))}}]),t}(n.Component),le=a(16),ie=a.n(le),se=function(e){var t=e.comment,a=e.loggedInUser,n=e.deleteComment;return r.a.createElement("div",null,r.a.createElement("ul",{className:ie.a.CommentListItem},r.a.createElement("li",null,r.a.createElement("p",{className:ie.a.Ptag},"Posted by: ",t.author),r.a.createElement("p",{className:ie.a.Ptag},t.body),r.a.createElement(ee,{votes:t.votes,id:t.comment_id,type:"comment"}),a===t.author&&r.a.createElement("button",{type:"button",className:ie.a.Button,onClick:function(){return n(t.comment_id)}},"Delete My Comment"))))},ue=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={comments:null,isLoading:!0,err:null},a.fetchCommentsByArticleId=function(){P(a.props.article_id).then(function(e){var t=e.comments;return a.setState({comments:t,isLoading:!1})}).catch(function(e){a.setState({err:e,isLoading:!1})})},a.addComment=function(e){a.setState(function(t){return{comments:[e].concat(Object(A.a)(t.comments))}})},a.deleteComment=function(e){j(e).then(function(){a.setState(function(t){return{comments:t.comments.filter(function(t){return t.comment_id!==e})}})}).catch(function(e){a.setState({err:e})})},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.comments,n=t.isLoading,o=t.err;return o?r.a.createElement(b,{err:o}):n?r.a.createElement(D,{text:"Comments are loading..."}):r.a.createElement(r.a.Fragment,null,r.a.createElement(ce,{loggedInUser:this.props.loggedInUser,article_id:this.props.article_id,addComment:this.addComment}),r.a.createElement("div",null,a&&a.map(function(t){return r.a.createElement(se,{key:t.comment_id,comment:t,loggedInUser:e.props.loggedInUser,deleteComment:e.deleteComment})})))}},{key:"componentDidMount",value:function(){this.fetchCommentsByArticleId(this.props.article_id)}},{key:"componentDidUpdate",value:function(e,t){e.article_id!==this.props.article_id&&this.fetchCommentsByArticleId()}}]),t}(n.Component),me=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={article:null,isLoading:!0,err:null},a.fetchArticleById=function(){O(a.props.article_id).then(function(e){var t=e.article;return a.setState({article:t,isLoading:!1})}).catch(function(e){return a.setState({err:e,isLoading:!1})})},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.state,t=e.article,a=e.isLoading,n=e.err;return n?r.a.createElement(b,{err:n}):a?r.a.createElement(D,{text:"Article is loading..."}):t?r.a.createElement("div",null,r.a.createElement("div",{className:ae.a.Div},r.a.createElement("h2",{className:ae.a.Title},t.title),r.a.createElement("p",{className:ae.a.Ptag},"Author: ",t.author),r.a.createElement(d.a,{to:"/authors/".concat(t.author)},r.a.createElement("p",{className:ae.a.Ptag},"Read more articles by ",t.author)),r.a.createElement("p",{className:ae.a.Ptag},t.body),r.a.createElement(d.a,{className:ae.a.Link,to:"/topic/".concat(t.topic)},r.a.createElement("p",{className:ae.a.Ptag},"Click here for more articles on... ",t.topic)),r.a.createElement(ee,{className:ae.a.Voter,votes:t.votes,id:t.article_id,type:"article"}),r.a.createElement("p",{className:ae.a.Ptag},"Comments: ",t.comment_count)),r.a.createElement(ue,{loggedInUser:this.props.loggedInUser,article_id:this.props.article_id})):null}},{key:"componentDidMount",value:function(){this.fetchArticleById(this.props.id)}},{key:"componentDidUpdate",value:function(e,t){e.article_id!==this.props.article_id&&this.fetchArticleById()}}]),t}(r.a.Component),de=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={loggedInUser:"jessjelly"},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.state.loggedInUser;return r.a.createElement(r.a.Fragment,null,r.a.createElement(E,null),r.a.createElement("div",{className:h.a.App},r.a.createElement(d.b,null,r.a.createElement(G,{loggedInUser:e,path:"/"}),r.a.createElement(G,{loggedInUser:e,path:"/topic/:topic"}),r.a.createElement(G,{loggedInUser:e,author:this.props.author,path:"/authors/:author"}),r.a.createElement(me,{loggedInUser:e,path:"/articles/:article_id"}),r.a.createElement(J,{loggedInUser:e,path:"/articles"}),r.a.createElement(b,{text:"404: Page Not Found",default:!0}))))}}]),t}(n.Component);c.a.render(r.a.createElement(de,null),document.getElementById("root"))},9:function(e,t,a){e.exports={Div:"Article_Div__ZNu7p",Ptag:"Article_Ptag__OiCNY",Title:"Article_Title__1ectb"}}},[[37,1,2]]]);
//# sourceMappingURL=main.a5e4541f.chunk.js.map