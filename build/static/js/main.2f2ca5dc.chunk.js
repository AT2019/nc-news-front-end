(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1:function(e,t,a){e.exports={BodyLink:"Articles_BodyLink__5qsyU",DeleteButton:"Articles_DeleteButton__2vkwN",List:"Articles_List__250gm",ListItem:"Articles_ListItem__3BVsE",MainDivContainer:"Articles_MainDivContainer__ABJyO",Text:"Articles_Text__2wWmf",TitleText:"Articles_TitleText__R0Ciu",Label:"Articles_Label__2E3vv"}},11:function(e,t,a){e.exports={Button:"Nav_Button__2aF5S",Nav:"Nav_Nav__2u-D6",Logo:"Nav_Logo__1ONvY",Ptag:"Nav_Ptag__3fCOl"}},12:function(e,t,a){e.exports={Title:"ArticleAdder_Title__2uaCA",Dropdown:"ArticleAdder_Dropdown__34dj1",ArticleText:"ArticleAdder_ArticleText__k7cd1",ArticleAdderButton:"ArticleAdder_ArticleAdderButton__F6cR5",Label:"ArticleAdder_Label__2OmP1"}},15:function(e,t,a){e.exports={Pages:"PageChanger_Pages__1_-qd",NextPageButton:"PageChanger_NextPageButton__3ThqG",PageNum:"PageChanger_PageNum__1Yhlu",PrevPageButton:"PageChanger_PrevPageButton__wMLpW"}},16:function(e,t,a){e.exports={CommentButton:"CommentAdder_CommentButton__fVz-E",Form:"CommentAdder_Form__1jRfF",Input:"CommentAdder_Input__h38dq",Label:"CommentAdder_Label__3f3zI"}},17:function(e,t,a){e.exports={Button:"Comments_Button__1F_SH",CommentListItem:"Comments_CommentListItem__Ktutr",Ptag:"Comments_Ptag__61Ig3"}},32:function(e,t,a){e.exports={Nav:"App_Nav__1dIWL",App:"App_App__16ZpL",spinner:"App_spinner__zg8k4",spin:"App_spin__3HENx","App-logo":"App_App-logo__25k4o","App-logo-spin":"App_App-logo-spin__1e7sv","App-header":"App_App-header__xLkWl","App-link":"App_App-link__3FsH9"}},33:function(e,t,a){e.exports=a.p+"static/media/logo2.b0ec2f31.png"},34:function(e,t,a){e.exports={ErrorPage:"ErrorPage_ErrorPage__2vvEy"}},36:function(e,t,a){e.exports={Loading:"Loading_Loading__3_YTx"}},37:function(e,t,a){e.exports={Select:"Sorter_Select__1HuWf"}},38:function(e,t,a){e.exports={Dropdown:"Orderer_Dropdown__3Sn1i"}},39:function(e,t,a){e.exports={Votes:"Voter_Votes__2SFtp"}},40:function(e,t,a){e.exports=a(71)},45:function(e,t,a){},71:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(30),c=a.n(o),l=(a(45),a(3)),i=a(4),s=a(6),u=a(5),m=a(7),d=a(2),p=a(32),h=a.n(p),g=a(33),_=a.n(g),f=a(11),E=a.n(f),v=function(e){return r.a.createElement("nav",{className:E.a.Nav},r.a.createElement(d.a,{to:"/"},r.a.createElement("img",{className:E.a.Logo,src:_.a,alt:"NC News Logo"})),r.a.createElement(d.a,{to:"/topic/cooking"},r.a.createElement("button",{className:E.a.Button},"Cooking")),r.a.createElement(d.a,{to:"/topic/football"},r.a.createElement("button",{className:E.a.Button},"Football")),r.a.createElement(d.a,{to:"/topic/coding"},r.a.createElement("button",{className:E.a.Button},"Coding")),r.a.createElement(d.a,{to:"/"},r.a.createElement("button",{className:E.a.Button},"Homepage")),r.a.createElement("p",{className:E.a.Ptag},"Logged in as: ",e.loggedInUser))},b=a(34),A=a.n(b),C=function(e){var t=e.text,a=e.err;return r.a.createElement("div",null,r.a.createElement("h1",{className:A.a.Error},t||"Something went wrong..."),a&&r.a.createElement("p",null,a.message))},N=a(18),y=a(13),L=a(10),P=a.n(L),O="https://nc-newsorama.herokuapp.com/api",j=function(e,t,a,n,r){return P.a.get("".concat(O,"/articles"),{params:{author:e,topic:t,sort_by:a,order:n,p:r}}).then(function(e){return e.data})},k=function(e){return P.a.get("".concat(O,"/articles/").concat(e)).then(function(e){return e.data})},x=function(e){return P.a.get("".concat(O,"/articles/").concat(e,"/comments")).then(function(e){return e.data})},I=function(e,t){return P.a.post("".concat(O,"/articles/").concat(e,"/comments"),t).then(function(e){return e.data.comment}).catch(function(e){return console.log(e)})},S=function(e){return P.a.delete("".concat(O,"/comments/").concat(e))},B=function(e,t,a){return P.a.patch("".concat(O,"/").concat(e,"s/").concat(t),{inc_votes:a})},w=function(e){return P.a.post("".concat(O,"/articles"),e).then(function(e){return e.data.article}).catch(function(e){return console.log(e)})},D=function(e){return P.a.delete("".concat(O,"/articles/").concat(e))},T=a(1),U=a.n(T),F=a(35),M=a.n(F),V=a(36),q=a.n(V),W=function(e){var t=e.text;return r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:q.a.Loading},t||"Loading..."),r.a.createElement(M.a,{size:120,spinnerColor:"#333",spinnerWidth:2,visible:!0}))},H=a(37),R=a.n(H),Y=void 0,z=function(e){e.setSort;return r.a.createElement("select",{className:R.a.Select,id:"sort",onChange:function(e){return Y.handleChange(e.target.value,"sort")}},r.a.createElement("option",{value:"created_at"},"Date"),r.a.createElement("option",{value:"comment_count"},"Comments"),r.a.createElement("option",{value:"votes"},"Votes"))},J=a(38),G=a.n(J),K=void 0,X=function(e){e.setOrder;return r.a.createElement("select",{className:G.a.Dropdown,id:"order",onChange:function(e){return K.handleChange(e.target.value,"order")}},r.a.createElement("option",{id:"asc",value:"asc"},"Ascending"),r.a.createElement("option",{id:"desc",value:"desc"},"Descending"))},Z=a(12),Q=a.n(Z),$=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={title:"",topic:"coding",author:"",body:"",err:null},a.handleChange=function(e,t){a.setState(Object(y.a)({},t,e))},a.handleAddArticle=function(e){e.preventDefault();var t=a.state,n=t.title,r=t.topic,o=t.body,c=a.props.author;w({title:n,topic:r,body:o,author:c}).then(function(e){a.props.setNewArticle(e),Object(d.c)("/articles/".concat(e.article_id)),a.setState({title:"",topic:"coding",author:"",body:""})}).catch(function(e){var t=e.err;a.setState({err:t})})},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.title,n=t.topic,o=t.body,c=t.err;return c?r.a.createElement(C,{err:c}):r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{onSubmit:this.handleAddArticle},r.a.createElement("input",{className:Q.a.Title,type:"text",id:"title",placeholder:"Title",onChange:function(t){return e.handleChange(t.target.value,"title")},value:a,required:!0}),r.a.createElement("input",{className:Q.a.ArticleText,id:"body",placeholder:"Enter your article here...",onChange:function(t){return e.handleChange(t.target.value,"body")},value:o,required:!0}),r.a.createElement("div",{className:Q.a.ArticleAdderDivContainer},r.a.createElement("label",{className:Q.a.Label},"Topic: "),r.a.createElement("select",{className:Q.a.Dropdown,id:"topic",onChange:function(t){return e.handleChange(t.target.value,"topic")},value:n},r.a.createElement("option",{value:"coding"},"Coding"),r.a.createElement("option",{value:"football"},"Football"),r.a.createElement("option",{value:"cooking"},"Cooking")),r.a.createElement("button",{className:Q.a.ArticleAdderButton},"Add Article"))))}}]),t}(n.Component),ee=function(e){return e.slice(0,250)},te=function(e){return new Date(e).toLocaleString()},ae=function(e){var t=e.article,a=e.loggedInUser,n=e.deleteArticle;return r.a.createElement("div",null,r.a.createElement("li",{className:U.a.ListItem},r.a.createElement(d.a,{className:U.a.Link,to:"/articles/".concat(t.article_id)},r.a.createElement("h3",{className:U.a.TitleText},t.title)),r.a.createElement(d.a,{className:U.a.BodyLink,to:"/articles/".concat(t.article_id)},r.a.createElement("p",{className:U.a.Text},ee(t.body),"...click here to read more")),r.a.createElement("p",{className:U.a.Text},"Author: ",t.author),r.a.createElement(d.a,{className:U.a.Link,to:"/authors/".concat(t.author)},r.a.createElement("p",{className:U.a.Text},"Read more articles by ",t.author)),r.a.createElement(d.a,{className:U.a.Link,to:"/topic/".concat(t.topic)},r.a.createElement("p",{className:U.a.Text},"Click here for more articles on... ",t.topic)),r.a.createElement("p",{className:U.a.Text},"Created at: ",te(t.created_at)),r.a.createElement("p",{className:U.a.Text},"Votes: ",t.votes),r.a.createElement("p",{className:U.a.Text},"Comments: ",t.comment_count),a===t.author&&r.a.createElement("button",{className:U.a.DeleteButton,type:"button",onClick:function(){return n(t.article_id)}},"Delete My Article")))},ne=a(15),re=a.n(ne),oe=function(e){var t=e.p,a=e.finalPage,n=e.setPage;return r.a.createElement("div",{className:re.a.Pages},r.a.createElement("button",{className:re.a.PrevPageButton,onClick:function(){return n(t+-1)},disabled:1===t},"Previous Page"),r.a.createElement("p",{className:re.a.PageNum},"Page: ",t),r.a.createElement("button",{className:re.a.NextPageButton,onClick:function(){return n(t+1)},disabled:a},"Next Page"))},ce=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={articles:null,sort:"created_at",order:"desc",isLoading:!0,err:null,p:1,totalArticleCount:0},a.fetchArticles=function(){var e=a.props,t=e.author,n=e.topic,r=a.state,o=r.sort,c=r.order,l=r.p;j(t,n,o,c,l).then(function(e){var t=e.articles,n=e.total_count;a.setState({articles:t,totalArticleCount:n,isLoading:!1,err:null,p:l})}).catch(function(e){a.setState({err:e,isLoading:!1})})},a.handleChange=function(e,t){a.setState(Object(y.a)({},t,e))},a.setPage=function(e){a.setState({p:e})},a.setNewArticle=function(e){a.setState(function(t){return{articles:[e].concat(Object(N.a)(t.articles))}})},a.deleteArticle=function(e){D(e).then(function(){a.setState(function(t){return{articles:t.articles.filter(function(t){return t.article_id!==e})}})}).catch(function(e){a.setState({err:e})})},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.articles,n=t.isLoading,o=t.err,c=t.p,l=10*c>=t.totalArticleCount;return o?r.a.createElement(C,{err:o}):n?r.a.createElement(W,{text:"Articles are loading..."}):r.a.createElement("div",{className:U.a.MainDivContainer},r.a.createElement($,{author:this.props.loggedInUser,setNewArticle:this.setNewArticle}),r.a.createElement("br",null),r.a.createElement("label",{className:U.a.Label},"Sort articles by: "),r.a.createElement("br",null),r.a.createElement(z,{onChange:this.handleChange}),r.a.createElement(X,{onChange:this.handleChange}),r.a.createElement("ul",{className:U.a.List},a&&a.map(function(t){return r.a.createElement(ae,{article:t,key:t.article_id,loggedInUser:e.props.loggedInUser,deleteArticle:e.deleteArticle})})),r.a.createElement(oe,{p:c,finalPage:l,setPage:this.setPage}))}},{key:"componentDidMount",value:function(){this.fetchArticles()}},{key:"componentDidUpdate",value:function(e,t){e.topic===this.props.topic&&e.author===this.props.author&&t.sort===this.state.sort&&t.order===this.state.order&&t.p===this.state.p||this.fetchArticles(),t.totalArticleCount!==this.state.totalArticleCount&&this.setState({p:1})}}]),t}(n.Component),le=a(39),ie=a.n(le),se=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={voteModifier:0,err:null},a.vote=function(e){B(a.props.type,a.props.id,e).catch(function(e){a.setState({err:e})}),a.setState(function(t){return{voteModifier:t.voteModifier+e}})},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.voteModifier;return t.err?r.a.createElement("p",null,"Something went wrong..."):r.a.createElement("div",{className:ie.a.Votes},r.a.createElement("p",null,r.a.createElement("button",{onClick:function(){return e.vote(1)},disabled:1===a},r.a.createElement("span",{role:"img","aria-label":"thumbs up"},"\ud83d\udc4d")),"Votes: ",this.props.votes+this.state.voteModifier,r.a.createElement("button",{onClick:function(){return e.vote(-1)},disabled:-1===a},r.a.createElement("span",{role:"img","aria-label":"thumbs down"},"\ud83d\udc4e"))))}}]),t}(n.Component),ue=a(9),me=a.n(ue),de=a(16),pe=a.n(de),he=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={body:"",err:null},a.handleChange=function(e,t){a.setState(Object(y.a)({},t,e))},a.handleSubmit=function(e){e.preventDefault();var t=a.state.body,n=a.props,r=n.loggedInUser,o=n.article_id;I(o,{body:t,username:r}).then(function(e){a.props.addComment(e),a.setState({body:""})}).catch(function(e){return a.setState({err:e,isLoading:!1})})},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.body,n=t.err;return n?r.a.createElement(C,{err:n}):r.a.createElement("form",{className:pe.a.Form,onSubmit:this.handleSubmit},r.a.createElement("label",{className:pe.a.Label,htmlFor:"body"},"Add Your Comment Here...."),r.a.createElement("input",{className:pe.a.Input,type:"text",name:"body",id:"body",minLength:"1",required:!0,value:a,onChange:function(t){return e.handleChange(t.target.value,"body")}}),r.a.createElement("button",{className:pe.a.CommentButton},"+"))}}]),t}(n.Component),ge=a(17),_e=a.n(ge),fe=function(e){var t=e.comment,a=e.loggedInUser,n=e.deleteComment;return r.a.createElement("div",null,r.a.createElement("ul",{className:_e.a.CommentListItem},r.a.createElement("li",null,r.a.createElement("p",{className:_e.a.Ptag},"Posted by: ",t.author),r.a.createElement("p",{className:_e.a.Ptag},t.body),r.a.createElement(se,{votes:t.votes,id:t.comment_id,type:"comment"}),a===t.author&&r.a.createElement("button",{type:"button",className:_e.a.Button,onClick:function(){return n(t.comment_id)}},"Delete My Comment"))))},Ee=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={comments:null,isLoading:!0,err:null},a.fetchCommentsByArticleId=function(){x(a.props.article_id).then(function(e){var t=e.comments;return a.setState({comments:t,isLoading:!1})}).catch(function(e){a.setState({err:e,isLoading:!1})})},a.addComment=function(e){a.setState(function(t){return{comments:[e].concat(Object(N.a)(t.comments))}})},a.deleteComment=function(e){S(e).then(function(){a.setState(function(t){return{comments:t.comments.filter(function(t){return t.comment_id!==e})}})}).catch(function(e){a.setState({err:e})})},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.comments,n=t.isLoading,o=t.err;return o?r.a.createElement(C,{err:o}):n?r.a.createElement(W,{text:"Comments are loading..."}):r.a.createElement(r.a.Fragment,null,r.a.createElement(he,{loggedInUser:this.props.loggedInUser,article_id:this.props.article_id,addComment:this.addComment}),r.a.createElement("div",null,a&&a.map(function(t){return r.a.createElement(fe,{key:t.comment_id,comment:t,loggedInUser:e.props.loggedInUser,deleteComment:e.deleteComment})})))}},{key:"componentDidMount",value:function(){this.fetchCommentsByArticleId(this.props.article_id)}},{key:"componentDidUpdate",value:function(e,t){e.article_id!==this.props.article_id&&this.fetchCommentsByArticleId()}}]),t}(n.Component),ve=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={article:null,isLoading:!0,err:null},a.fetchArticleById=function(){k(a.props.article_id).then(function(e){var t=e.article;return a.setState({article:t,isLoading:!1})}).catch(function(e){return a.setState({err:e,isLoading:!1})})},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.state,t=e.article,a=e.isLoading,n=e.err;return n?r.a.createElement(C,{err:n}):a?r.a.createElement(W,{text:"Article is loading..."}):t?r.a.createElement("div",null,r.a.createElement("div",{className:me.a.Div},r.a.createElement("h2",{className:me.a.Title},t.title),r.a.createElement("p",{className:me.a.Ptag},"Author: ",t.author),r.a.createElement(d.a,{to:"/authors/".concat(t.author)},r.a.createElement("p",{className:me.a.Ptag},"Read more articles by ",t.author)),r.a.createElement("p",{className:me.a.Ptag},t.body),r.a.createElement(d.a,{className:me.a.Link,to:"/topic/".concat(t.topic)},r.a.createElement("p",{className:me.a.Ptag},"Click here for more articles on... ",t.topic)),r.a.createElement(se,{className:me.a.Voter,votes:t.votes,id:t.article_id,type:"article"}),r.a.createElement("p",{className:me.a.Ptag},"Comments: ",t.comment_count)),r.a.createElement(Ee,{loggedInUser:this.props.loggedInUser,article_id:this.props.article_id})):null}},{key:"componentDidMount",value:function(){this.fetchArticleById(this.props.id)}},{key:"componentDidUpdate",value:function(e,t){e.article_id!==this.props.article_id&&this.fetchArticleById()}}]),t}(r.a.Component),be=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={loggedInUser:"jessjelly"},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.state.loggedInUser;return r.a.createElement(r.a.Fragment,null,r.a.createElement(v,{loggedInUser:e}),r.a.createElement("div",{className:h.a.App},r.a.createElement(d.b,null,r.a.createElement(ce,{loggedInUser:e,path:"/"}),r.a.createElement(ce,{loggedInUser:e,topic:this.props.topic,path:"/topic/:topic"}),r.a.createElement(ce,{loggedInUser:e,author:this.props.author,path:"/authors/:author"}),r.a.createElement(ve,{loggedInUser:e,path:"/articles/:article_id"}),r.a.createElement($,{loggedInUser:e,path:"/articles"}),r.a.createElement(C,{text:"404: Page Not Found",default:!0}))))}}]),t}(n.Component);c.a.render(r.a.createElement(be,null),document.getElementById("root"))},9:function(e,t,a){e.exports={Div:"Article_Div__2iFa9",Logo:"Article_Logo__1ioFr",Ptag:"Article_Ptag__3WEh4",Title:"Article_Title__3XY4j"}}},[[40,1,2]]]);
//# sourceMappingURL=main.2f2ca5dc.chunk.js.map